function cssTransform(e,t,a){if(e.transform||(e.transform={}),!(arguments.length>2))return a=e.transform[t],void 0===a&&(a="scale"==t||"scaleX"==t||"scaleY"==t?1:0),a;e.transform[t]=a;var n="";for(var r in e.transform){switch(r){case"rotate":case"skewX":case"skewY":n+=r+"("+e.transform[r]+"deg) ";break;case"translateX":case"translateY":case"translateZ":n+=r+"("+e.transform[r]+"px) ";break;case"scaleX":case"scaleY":case"scale":n+=r+"("+e.transform[r]+") "}e.style.WebkitTransform=e.style.transform=n}}function ajax(e){e=e||{},e.method=e.method.toUpperCase()||"POST",e.url=e.url||"",e.async=e.async||!0,e.data=e.data||null,e.success=e.success||function(){};var t=null;t=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var a=[];for(var n in e.data)a.push(n+"="+e.data[n]);var r=a.join("&");"POST"===e.method.toUpperCase()?(t.open(e.method,e.url,e.async),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),t.send(r)):"GET"===e.method.toUpperCase()&&(t.open(e.method,e.url+"?"+r,e.async),t.send(null)),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&e.success(t.responseText)}}function getPos(e){for(var t={top:0,left:0};e;)t.top+=e.offsetTop,t.left+=e.offsetLeft,e=e.offsetParent;return t}function show(e){document.querySelector("."+e).style.display="block"}function hide(e){document.querySelector("."+e).style.display="none"}function $(e){return document.querySelector("."+e)}function $$(e){return document.querySelectorAll("."+e)}function createNode(e,t){return document.createElement(e)}function append(e,t){e.appendChild(t)}function extend(e,t){for(var a in t)t[a]&&(e[a]=t[a])}function setRem(){var e=document.querySelector("html"),t=e.getBoundingClientRect().width;e.style.fontSize=t/16+"px"}function setWrapperHeight(){for(var e=document.querySelector("html").getBoundingClientRect().height,t=$("m-top-bar").offsetHeight,a=$("top-nav").offsetHeight,n=$("m-play").offsetHeight,r=$$("wrapper"),s=$("wrapper-one"),o=$("wrapper-six"),i=$("wrapper-seven"),c=0;c<r.length;c++)r[c].style.height=e-t-a-n+"px";s.style.height=e-t-n+"px",o.style.height=e-t-n+"px",i.style.height=e+"px"}function delayLoad(e,t,a){var n=document.querySelectorAll(".delay"+a+" img"),r=document.body.clientHeight;document.body.clientWidth;scrollTop=e?Math.abs(e.y):0,scrollLeft=e?Math.abs(e.x):1,scrollLeft=t||1;for(var s=0;s<n.length;s++)getPos(n[s]).top<=scrollTop+r&&scrollLeft&&(n[s].src=n[s].getAttribute("xsrc"))}function fingerFollow(e,t){function a(e){s.style.transition="none",i=e.changedTouches[0],o=cssTransform(s,"translateX"),c=!1,l=!0,lastTime=(new Date).getTime(),lastPoint=i.pageX,disTance=0,disTime=0}function n(e){if(!c){var t=e.changedTouches[0],a=t.pageX-i.pageX,n=t.pageY-i.pageY;if(a=a>0?0:a,a=a<-s.offsetWidth?-s.offsetWidth:a,l){if(l=!1,Math.abs(a)<Math.abs(n))return void(c=!0)}else s.default.in();nowTime=(new Date).getTime(),t=e.changedTouches[0].pageX,disTance=t-lastPoint,lastPoint=t,disTime=nowTime-lastTime,lastTime=nowTime,cssTransform(s,"translateX",a+o)}}function r(){translateX=cssTransform(s,"translateX"),s.style.transition=".2s",translateX<s.offsetWidth/2?cssTransform(s,"translateX",-s.offsetWidth+o):cssTransform(s,"translateX",o);var e=disTance/disTime;e=isNaN(e)?0:e,e<-1.5&&cssTransform(s,"translateX",-s.offsetWidth+o),s.default.end()}var s=$(e),o=0,i=null,c=!1,l=!0;lastTime=0,lastPoint=0,disTance=0,disTime=0,s.default={in:function(){},end:function(){}},extend(s.default,t),s.addEventListener("touchstart",function(e){a(e)}),s.addEventListener("touchmove",function(e){n(e)}),s.addEventListener("touchend",r)}var scale=1/window.devicePixelRatio,meta=createNode("meta");meta.setAttribute("name","viewport"),meta.setAttribute("content","user-scalable=no,initial-scale="+scale+",minimum-scale="+scale+",maximum-scale="+scale),document.head.appendChild(meta),setRem(),window.addEventListener("orientationchange",setRem),window.addEventListener("resize",setRem),window.addEventListener("load",function(){document.addEventListener("touchstart",function(e){e.preventDefault()}),setWrapperHeight(),window.addEventListener("orientationchange",setWrapperHeight),window.addEventListener("resize",setWrapperHeight),delayLoad("","",0),function(){var e=new IScroll(".wrapper-one",{scrollbars:!0,fadeScrollbars:!0});!function(t){for(var a=$$(t),n=0;n<a.length;n++)a[n].index=n,a[n].flag=!0,a[n].children[0].addEventListener("touchend",function(){var t=this.querySelector(".header-icon"),a=this.nextElementSibling||this.nextSibling;this.parentNode.flag?(a.style.display="none",cssTransform(t,"rotate",-90),this.parentNode.flag=!1):(a.style.display="block",cssTransform(t,"rotate",0),this.parentNode.flag=!0),e.refresh()})}("favorite-list")}(),function(){var e=new IScroll(".wrapper-two",{scrollbars:!0,fadeScrollbars:!0,probeType:3,bounce:!1});e.page=0,e.on("scroll",function(){var e=this;setTimeout(function(){delayLoad(e,"",0)},200)}),e.on("scrollEnd",function(){function e(e){var e=JSON.parse(e).data[0],a=createNode("section");a.className="m-recommend";var n=createNode("div");n.className="header";var r=createNode("h2");r.innerHTML=e.title,n.appendChild(r);var s=createNode("a");s.href="javascript:;",s.innerHTML=e.more,n.appendChild(s),a.appendChild(n);var n=createNode("div");n.className="content delay0";var o=createNode("ul");n.appendChild(o),a.appendChild(n);for(var i=0;i<e.list.length;i++){var c=createNode("li"),s=createNode("a");s.href="javascript:;",c.appendChild(s);var l=createNode("img");l.src=e.src,l.setAttribute("xsrc",e.list[i].xsrc),s.appendChild(l);var d=createNode("p");d.innerHTML=e.list[i].describe,s.appendChild(d),o.appendChild(c)}t.scroller.appendChild(a),setTimeout(function(){t.refresh()},0)}var t=this;this.y<=this.maxScrollY&&this.page<4&&(this.page++,ajax({method:"GET",url:"data/data.json",success:e}))})}(),function(){var e=$("pullUp"),t=$("m-content ul"),a=new IScroll(".wrapper-three",{scrollbars:!0,probeType:2});a.page=0,a.on("scroll",function(){var t=this;setTimeout(function(){delayLoad(t,"",1)},200),this.y<=this.maxScrollY&&(e.style.height="100px",e.style.transition="1s",cssTransform(e,"scale",1))}),a.on("scrollEnd",function(){function a(e){for(var e=JSON.parse(e).data[0],a=0;a<e.list.length;a++){var r=createNode("li"),s=createNode("a");s.href="javascript:;",r.appendChild(s);var o=createNode("img");o.src=e.src,o.setAttribute("xsrc",e.list[a].xsrc),s.appendChild(o);var i=createNode("p");i.innerHTML=e.list[a].describe,s.appendChild(i),t.appendChild(r)}setTimeout(function(){n.refresh()},0)}var n=this;this.y<=this.maxScrollY&&this.page<3&&(this.page++,ajax({method:"GET",url:"data/data.json",success:a})),cssTransform(e,"scale",0),e.style.height="0"})}(),function(){var e=$("pullUp1"),t=$("m-content2 ul"),a=new IScroll(".wrapper-four",{scrollbars:!0,probeType:2});a.page=0,a.on("scroll",function(){var t=this;this.y<=this.maxScrollY&&(e.style.height="100px",e.style.transition="1s",cssTransform(e,"scale",1),console.log("scroll")),setTimeout(function(){delayLoad(t,"",2)},200)}),a.on("scrollEnd",function(){function a(e){for(var e=JSON.parse(e).data[0],a=0;a<e.list.length;a++){var r=createNode("li"),s=createNode("a");s.href="javascript:;",r.appendChild(s);var o=createNode("img");o.src=e.src,o.setAttribute("xsrc",e.list[a].xsrc),s.appendChild(o);var i=createNode("p");i.innerHTML=e.list[a].describe,s.appendChild(i),t.appendChild(r)}setTimeout(function(){n.refresh()},0)}var n=this;this.y<=this.maxScrollY&&this.page<3&&(this.page++,ajax({method:"GET",url:"data/data.json",success:function(t){setTimeout(function(){a(t),cssTransform(e,"scale",0),e.style.height="0"},200)}}))})}(),function(){new IScroll(".wrapper-five",{scrollbars:!0,fadeScrollbars:!0})}(),function(){function e(){function e(e){var e=JSON.parse(e);e=e.data;for(var t=0;t<e.length;t++){var n=createNode("li"),r=createNode("img");r.className="portrait",r.src=e[t].portrait,append(n,r);var s=createNode("div");s.className="detail";var o=createNode("p");o.className="event";var i=createNode("a");i.className="user",i.innerHTML=e[t].user,append(o,i);var c=createNode("p");c.className="topic",c.innerHTML=e[t].topic,append(o,c),append(s,o);var l=createNode("p");l.className="time",l.innerHTML=e[t].time,append(s,l);var d=createNode("p");d.className="comment",d.innerHTML=e[t].comment,append(s,d);var p=createNode("div");p.className="figure";for(var u=0;u<e[t].src.length;u++){var f=createNode("img");f.src=e[t].src[u],4==e[t].src.length&&(f.style.width=360/67.5+"rem",f.style.height=360/67.5+"rem",f.style.marginRight=5/67.5+"rem"),1==e[t].src.length&&(f.style.width=450/67.5+"rem",f.style.height=450/67.5+"rem"),append(p,f)}4==e[t].src.length&&(p.style.justifyContent="flex-start",p.style.webkitjustifyContent="flex-start"),append(s,p);var h=createNode("div");h.className="song";var m=createNode("img");m.className="cover",m.src=e[t].cover,append(h,m);var v=createNode("div");v.className="songWrap";var g=createNode("a");g.className="songName",g.innerHTML=e[t].songname,append(v,g);var y=createNode("a");y.className="singer",y.innerHTML=e[t].singer,append(v,y),append(h,v),append(s,h);var T=createNode("div");T.className="shareWrap";var N=createNode("span");N.className="good",N.innerHTML=e[t].good,append(T,N);var w=createNode("span");w.className="message",w.innerHTML=e[t].message,append(T,w);var b=createNode("span");b.className="share",b.innerHTML=e[t].share,append(T,b);var L=createNode("span");L.className="more",append(T,L),append(s,T),append(n,s),append(a,n)}}var a=document.getElementById("share-list");ajax({method:"GET",url:"data/share.json",success:e}),setTimeout(function(){t.refresh()},0)}var t=new IScroll(".wrapper-six",{scrollbars:!0,fadeScrollbars:!0,probeType:3,bounce:!1});e(),t.page=1,t.on("scrollEnd",function(){this.y<=this.maxScrollY&&this.page<4&&(this.page++,e())})}(),function(){var e=new Swiper(".swiper-container-all",{resistanceRatio:0,touchAngle:30,speed:300,initialSlide:1,onSlideChangeStart:function(e){for(var t=$("menu-middle").querySelectorAll("a"),a=0;a<t.length;a++)t[a].className="";t[e.activeIndex].className="active"}}),t=$("menu-middle"),a=t.querySelectorAll("a"),n=$$("menu");t.addEventListener("touchstart",function(e){var t=e.target;"a"==t.nodeName.toLowerCase()&&(t.parentNode.style.background="rgba(255, 255, 255, 0.05)")}),t.addEventListener("touchend",function(t){for(var n=t.target,r=0;r<a.length;r++)a[r].className="restore",a[r].index=r;"a"==n.nodeName.toLowerCase()&&(n.parentNode.style.background="",n.className="active"),e.wrapper[0].style.transition=".3s",e.setWrapperTranslate(-e.width*n.index),e.activeIndex=n.index});for(var r=0;r<n.length;r++)n[r].addEventListener("touchstart",function(e){var t=e.target;console.log(t.parentNode),"a"==t.nodeName.toLowerCase()&&(t.parentNode.style.background="rgba(255, 255, 255, 0.05)")});for(var r=0;r<n.length;r++)n[r].addEventListener("touchend",function(e){var t=e.target;console.log(t.parentNode),"a"==t.nodeName.toLowerCase()&&(t.parentNode.style.background="")})}(),function(){function e(e){for(var t=0;t<a.length;t++)a[t].className="";a[e].className="active"}var t=$("top-nav"),a=document.querySelectorAll(".top-nav li"),n=document.querySelector(".top-nav .slide-bar"),r=new Swiper(".swiper-container-home",{resistanceRatio:0,touchAngle:30,speed:250,touchReleaseOnEdges:!0,onTouchStart:function(e){e.activeIndex==e.slides.length-1&&(r.params.touchMoveStopPropagation=!1)},onTouchMove:function(e){if(r.touches.diff){n.style.transition="none";var t=(cssTransform(n,"translateX"),-e.translate/(4*e.width));t=t<0?0:t,t=t>1?1:t,cssTransform(n,"translateX",e.width*t)}},onTouchEnd:function(t){n.style.transition=".2s";var a=-Math.round(t.translate/t.width);cssTransform(n,"translateX",n.offsetWidth*a),e(a)},onSlideChangeStart:function(t){n.style.transition=".2s",cssTransform(n,"translateX",n.offsetWidth*t.activeIndex),e(t.activeIndex);var a=-r.translate;setTimeout(function(){delayLoad("",a,t.activeIndex)},300)}}),s=0,o=!0,i=0,c=0;t.addEventListener("touchstart",function(e){o=!0,c=0,i=e.changedTouches[0].pageX,n.style.transition="none",r.wrapper[0].style.transition="none";var t=e.target;"li"==t.nodeName.toLowerCase()&&(t.className="bg-active"),s=Math.floor(e.changedTouches[0].pageX/n.offsetWidth)}),t.addEventListener("touchmove",function(e){var t=e.changedTouches[0].pageX;c=Math.abs(t-i);for(var n=0;n<a.length;n++)a[n].className="";c>=5&&(e.stopPropagation(),r.setWrapperTranslate(0),o=!1),console.log("move:"+o)}),t.addEventListener("touchend",function(e){n.style.transition=".3s",r.wrapper[0].style.transition=".3s";for(var t=e.target,i=0;i<a.length;i++)a[i].className="";o&&c<=5&&("li"==t.nodeName.toLowerCase()&&(t.className="active"),cssTransform(n,"translateX",n.offsetWidth*s),r.setWrapperTranslate(-r.width*s)),setTimeout(function(){delayLoad("",scrollLeft,s)},300)})}(),function(){var e=new IScroll(".wrapper-seven",{bounce:!1,probeType:3}),t=$("m-setting");$("menu").addEventListener("touchend",function(e){e.stopPropagation(),t.style.transition=".2s",cssTransform(t,"translateX",t.offsetWidth),show("mask")}),fingerFollow("m-setting",{in:function(){var e=t.offsetWidth,a=cssTransform(t,"translateX"),n=a/e,r=.35*n;$("mask").style.opacity=r},end:function(){var a=t.offsetWidth,n=cssTransform(t,"translateX"),r=n/a,s=.35*r;$("mask").style.opacity=s,r<.5&&(hide("mask"),e.scrollTo(0,0)),$("mask").style.opacity=".35"}})}(),function(){new Swiper(".swiper-container-pic",{nested:!0,autoplay:2e3,autoplayDisableOnInteraction:!1,speed:600,loop:!0,pagination:".swiper-pagination",touchAngle:45})}()});